{% extends "base.html" %}

{% block title %}Mails Verwerken - Mail Organizer{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="mb-6">
        <a href="{{ url_for('mail_organizer.main') }}"
           class="text-white-400 hover:text-blue-300 transition-colors inline-flex items-center">
            ← Terug naar overzicht
        </a>
    </div>

    <div class="text-left mb-8">
        <h1 class="text-4xl font-bold text-white mb-4">Mails Verwerken</h1>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="mb-6">
                {% for category, message in messages %}
                    <div class="bg-red-500 bg-opacity-20 border border-red-400 text-red-100 px-4 py-3 rounded mb-3">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <form method="POST" class="space-y-6">
        <!-- Settings -->
        <div class="app-card rounded-2xl p-6">
            <h3 class="text-xl font-semibold text-white mb-6 border-b border-blue-400 pb-3">
                Instellingen
            </h3>

            <div class="space-y-4">
                <div>
                    <label for="max_mails" class="block text-gray-200 font-medium mb-2">
                        Aantal laatste mails om te verwerken:
                    </label>
                    <input type="number" id="max_mails" name="max_mails" min="1" value="50" required
                           class="w-full px-3 py-2 bg-white bg-opacity-10 border border-white border-opacity-20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">
                    <p class="text-gray-400 text-sm mt-1">Hoeveel mails maximaal verwerken (gelezen en ongelezen)</p>
                </div>

                <div>
                    <label for="exclusion_words" class="block text-gray-200 font-medium mb-2">
                        Uitsluitingswoorden (gescheiden door komma's):
                    </label>
                    <textarea id="exclusion_words" name="exclusion_words" rows="3"
                              placeholder="Bijvoorbeeld: test, draft, concept"
                              class="w-full px-3 py-2 bg-white bg-opacity-10 border border-white border-opacity-20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400"></textarea>
                    <p class="text-gray-400 text-sm mt-1">Mails die deze woorden in de titel bevatten worden overgeslagen</p>
                </div>
            </div>
        </div>

        <!-- Information -->
        <div class="bg-blue-500 bg-opacity-20 border border-blue-400 text-blue-100 p-6 rounded-lg">
            <h4 class="text-lg font-semibold text-blue-200 mb-3">Verwerkingsregels:</h4>
            <ul class="space-y-2 text-blue-100">
                <li>• Mails moeten format hebben: "projectnummer - projectnaam - onderwerp"</li>
                <li>• Alleen woorden met hoofdletter en zonder cijfers worden als plaatsnaam herkend</li>
                <li>• Mappen krijgen suffix [AUTO] om ze te kunnen herkennen</li>
                <li>• Verwerkte mails worden gemarkeerd als gelezen</li>
            </ul>
        </div>

        <div class="text-center">
            <button type="submit"
                    class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-medium transition-all hover:scale-105">
                Start Verwerking
            </button>
        </div>
    </form>
</div>
{% endblock %}
